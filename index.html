<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happiness Over the Luck</title>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@700&family=Numans&display=swap" rel="stylesheet">

  <style>
    *{box-sizing:border-box}
    :root{ --bg:#fff; --ink:#222; }
    body{
      margin:0; background:var(--bg); color:var(--ink);
      display:flex; flex-direction:column; align-items:center; text-align:center;
      justify-content:center;
      min-height:100svh;
      padding:80px 0 80px;
    }

    h1, #btn-click, #nav-collection{ font-family:'Numans',sans-serif; font-weight:400; }
    .card, .label{ font-family:'Montserrat Alternates',sans-serif; font-weight:700; }

    h1{
      font-size:clamp(40px,8vw,96px);
      margin:0 0 20px; line-height:1.05; letter-spacing:.2px;
    }

    #actions{ display:flex; gap:12px; align-items:center; margin-bottom:10px; }
    #btn-click{
      padding:12px 32px; border:none; border-radius:10px; background:#e6e6e6;
      font-size:16px; cursor:pointer; transition:filter .2s;
    }
    #btn-click:hover{ filter:brightness(.95); }

    #nav-collection{
      color:#666; font-size:16px; text-decoration:none;
      padding:10px 14px; border-radius:10px; border:1px solid #e7e7e7; background:#fafafa;
    }

    #card-container{ display:flex; justify-content:center; flex-wrap:wrap; width:100%; }

    .card{
      width:200px; height:300px;
      border-radius:8px;
      margin:40px;
      position:relative; display:block;
      padding:24px; overflow:hidden; isolation:isolate;
      opacity:0; transform:translateY(10px); animation:fadeIn .28s ease forwards;
    }
    @keyframes fadeIn{to{opacity:1; transform:none;}}

    .label{
      position:absolute; top:24px; right:24px;
      width:calc(100% - 48px);
      text-align:right; font-size:20px; line-height:1.2;
    }

    .icon{
      position:absolute; right:16px; bottom:16px;
      object-fit:contain; opacity:.95;
    }
  </style>
</head>
<body>
  <h1>HAPPINESS<br>OVER THE LUCK</h1>

  <div id="actions">
    <button id="btn-click" type="button">click</button>
    <a href="collection.html" id="nav-collection">collection</a>
  </div>

  <section id="card-container" aria-live="polite"></section>

  <script>
    const TIPS = [
      "sit by a window and look at the sky for 5 minutes",
      "write down three things you are grateful for",
      "drink a cup of warm tea",
      "send a quick message to a friend",
      "take a 10 minute walk while listening to your favorite song",
      "take 10 deep breaths",
      "eat your favorite fruit",
      "take a photo during a short walk",
      "record your mood today with one emoji",
      "enjoy a warm bath"
    ];

    const STYLE = {
      "sit by a window and look at the sky for 5 minutes": { bg:"#FFDE89", ink:"#DB773B", icon:"cloud",  w:72, h:72 },
      "write down three things you are grateful for":      { bg:"#6777B5", ink:"#B7CCE9", icon:"pencil", w:88, h:88 },
      "drink a cup of warm tea":                           { bg:"#F8CABA", ink:"#787BAE", icon:"cup",    w:76, h:76 },
      "send a quick message to a friend":                  { bg:"#D27089", ink:"#FFE2BE", icon:"message",w:80, h:80 },
      "take a 10 minute walk while listening to your favorite song": { bg:"#CAD183", ink:"#703D3C", icon:"music",  w:78, h:78 },
      "take 10 deep breaths":                              { bg:"#6EADC2", ink:"#FFE5E0", icon:"wind",   w:92, h:92 },
      "eat your favorite fruit":                           { bg:"#8B9F35", ink:"#FEFA94", icon:"apple",  w:72, h:72 },
      "take a photo during a short walk":                  { bg:"#2B2B23", ink:"#D1B7D2", icon:"camera", w:84, h:84 },
      "record your mood today with one emoji":             { bg:"#FF772D", ink:"#E2EB92", icon:"emoji",  w:84, h:84 },
      "enjoy a warm bath":                                 { bg:"#E1D0DB", ink:"#396451", icon:"bath",   w:90, h:90 }
    };

    const LS_KEY='hol_archive_v1';

    let remainingTips = [...TIPS];

    function addToArchive(text){
      let items=[];
      try{
        const raw = localStorage.getItem(LS_KEY);
        items = raw ? JSON.parse(raw) : [];
      }catch(_){}
      items.unshift({ text, ts:new Date().toISOString() });
      if(items.length > 200) items = items.slice(0, 200);
      localStorage.setItem(LS_KEY, JSON.stringify(items));
    }

    function pickUnique(){
      if(remainingTips.length === 0){
        alert("You've collected all cards");
        return null;
      }
      const idx = Math.floor(Math.random()*remainingTips.length);
      const text = remainingTips[idx];
      remainingTips.splice(idx,1);
      return text;
    }

    function makeCard(text){
      const s = STYLE[text] || {bg:"#eee", ink:"#222", icon:"emoji", w:84, h:84};

      const card=document.createElement('div');
      card.className='card';
      card.style.background=s.bg;
      card.style.color=s.ink;

      const label=document.createElement('div');
      label.className='label';
      label.textContent=text;
      card.appendChild(label);

      const icon=document.createElement('img');
      icon.className='icon';
      icon.src = s.icon + '.png'; 
      icon.alt=s.icon;
      icon.style.width=s.w+'px';
      icon.style.height=s.h+'px';
      card.appendChild(icon);

      return card;
    }

    const container=document.getElementById('card-container');
    const btn=document.getElementById('btn-click');

    btn.addEventListener('click', ()=>{
      const text = pickUnique();
      if(!text) return;

      container.innerHTML='';
      addToArchive(text);
      container.appendChild(makeCard(text));
    });
  </script>
</body>
</html>
